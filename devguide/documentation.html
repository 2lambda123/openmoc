<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7. Documentation &mdash; OpenMOC Documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="OpenMOC Documentation" href="../index.html" />
    <link rel="up" title="Developer’s Guide" href="index.html" />
    <link rel="next" title="8. Development Workflow" href="work_flow.html" />
    <link rel="prev" title="6. Style Guide for OpenMOC" href="style_guide.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="work_flow.html" title="8. Development Workflow"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="style_guide.html" title="6. Style Guide for OpenMOC"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">OpenMOC Documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Developer&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="documentation">
<span id="id1"></span><h1>7. Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h1>
<p>The following describes the suggested steps that developers should take to edit, revise or add to OpenMOC&#8217;s documentation. When new features are added to OpenMOC, the documentation located in <tt class="file docutils literal"><span class="pre">/docs</span></tt> should be updated in the same pull request as the new feature. OpenMOC uses the <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a> tool for documentation due to its growing popularity for open source codes. Sphinx uses <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> (rst) files to encapuslate text-based content with semantic markup for figures, tables, URLs, and more. Sphinx provides a compiler which parses the reStructuredText source files to generate a target output in the form of HTML or a PDF. OpenMOC also uses <a class="reference external" href="http://www.stack.nl/~dimitri/doxygen/">Doxygen</a> for automated generated of Application Programming Interface (API) documentation based on source code comments. The use of Doxygen-style comments is explained further in <a class="reference internal" href="style_guide.html#code-comments"><em>Code Comments</em></a>.</p>
<div class="section" id="preliminary-configuration">
<h2>7.1. Preliminary Configuration<a class="headerlink" href="#preliminary-configuration" title="Permalink to this headline">¶</a></h2>
<p>First, in order to build OpenMOC&#8217;s documentation, you must have installed both Sphinx and Doxygen. Since both tools are widely used, they are available with most source package system. On Debian-based systems, such as Ubuntu, you may install both tools with the following command in the console:</p>
<div class="highlight-none"><div class="highlight"><pre>sudo apt-get install python-sphinx doxygen
</pre></div>
</div>
<p>Likewise, on Mac OS with <a class="reference external" href="http://www.macports.org/">MacPorts</a> you may install each with the following command:</p>
<div class="highlight-none"><div class="highlight"><pre>sudo port install py27-sphinx doxygen
</pre></div>
</div>
<p>These packages are all that is required to build and update the documentation in your pull request. Next, we will discuss how you can build and update the documentation when you modify the source code.</p>
</div>
<div class="section" id="writing-new-documentation">
<h2>7.2. Writing New Documentation<a class="headerlink" href="#writing-new-documentation" title="Permalink to this headline">¶</a></h2>
<p>This tutorial will not present any of the semantics of how to write documentation for Sphinx as that is well covered by its own tutorials. Likewise, the same is true for Doxygen-style comments, although the basics are presented in <a class="reference internal" href="style_guide.html#code-comments"><em>Code Comments</em></a>. Instead, this section presents the location of the source code and the basic console commands used to generate HTML documentation.</p>
<p>First, the <tt class="file docutils literal"><span class="pre">/docs/source</span></tt> directory contains the reStructuredText source for the Sphinx documentation. In order to compile the Sphinx documentation into HTML, you can run the following from within the <tt class="file docutils literal"><span class="pre">/docs</span></tt> directory:</p>
<div class="highlight-none"><div class="highlight"><pre>cd docs
make html
</pre></div>
</div>
<p>This command will use the Sphinx tool to generate HTML in the <tt class="file docutils literal"><span class="pre">/docs/build</span></tt> directory. From within the <tt class="file docutils literal"><span class="pre">/docs</span></tt> directory, you may use a web browser, such as Mozilla Firefox, to view your newly generated documentation as follows:</p>
<div class="highlight-none"><div class="highlight"><pre>firefox build/html/index.html
</pre></div>
</div>
<p>The reStructuredText source files that should be updated with each pull request are located in the <tt class="file docutils literal"><span class="pre">/docs/source</span></tt> directory. If developers wish to add new pictures to the documentation, image files should be added to the <tt class="file docutils literal"><span class="pre">/docs/img</span></tt> directory in either png or svg format. Developers can test out their changes to the documentation by recompiling the Sphinx documentation into HTML and viewing the updated HTML files.</p>
<p>Likewise, in order to build a revised version of the <a class="reference internal" href="../doxygen/api.html#api"><em>OpenMOC API</em></a> from Doxygen-style comments in the Python and C++ source code, you may use the following console commands from within the <tt class="file docutils literal"><span class="pre">/docs</span></tt> directory:</p>
<div class="highlight-none"><div class="highlight"><pre>cd doxygen
doxygen Doxyfile
./doxy2swig.py
</pre></div>
</div>
<p>This will build a new version of the API in the <tt class="file docutils literal"><span class="pre">/docs/doxygen/html</span></tt> directory. In addition, the <tt class="file docutils literal"><span class="pre">docs/doxy2swig.py</span></tt> script will parse the Doxygen-style comments and generate Python docstring-equivalents in an updated <tt class="file docutils literal"><span class="pre">openmoc/docstring.i</span></tt> file for SWIG to inject into the <tt class="code docutils literal"><span class="pre">openmoc</span></tt> Python module. From within the <tt class="file docutils literal"><span class="pre">/docs/doxygen</span></tt> directory, you may use a web browser, such as Mozilla Firefox, to view your newly generated documentation as follows:</p>
<div class="highlight-none"><div class="highlight"><pre>firefox html/index.html
</pre></div>
</div>
<p>Note that this procedure updates the documentation shipped with the source code in the <strong>develop</strong> branch, but changes will not be reflected in the documentation on the website. <a class="reference external" href="https://github.com/mit-crpg/OpenMOC">GitHub</a> reserves the use of the <strong>gh-pages</strong> branch to host a project website for each repository. The <strong>gh-pages</strong> branch contains the documentation source code for the latest public release of OpenMOC and thus will only be periodically updated with the documentation from the <strong>develop</strong> branch. The procedure for updating the website documentation will be discussed in the next section.</p>
</div>
<div class="section" id="version-control-for-new-documentation">
<h2>7.3. Version Control for New Documentation<a class="headerlink" href="#version-control-for-new-documentation" title="Permalink to this headline">¶</a></h2>
<p>With each new release, the website documentation will be updated by one of the core developers with the latest documentation from the <strong>develop</strong> branch. In order to <strong>expose</strong> newly generated HTML documentation to GitHub such that it will present on the website, the Sphinx and Doxygen build files must be copied to the <strong>gh-pages</strong> branch. Once the documentation is ready to be copied over to the <strong>gh-pages</strong> branch, the Sphinx and Doxygen HTML files need to be built:</p>
<div class="highlight-none"><div class="highlight"><pre>cd docs
make html
cd doxygen
doxygen Doxyfile
cd ../..
</pre></div>
</div>
<p>Now that the HTML files have been built, you can checkout the <strong>gh-pages</strong> branch and then checkout a new branch to store the new version of the documentation:</p>
<div class="highlight-none"><div class="highlight"><pre>git checkout gh-pages
git checkout -b gh-pages-update
</pre></div>
</div>
<p>You can then copy the files from the <tt class="file docutils literal"><span class="pre">/docs</span></tt> directory to the root OpenMOC directory on your new branch:</p>
<div class="highlight-none"><div class="highlight"><pre>cp -r docs/build/html/* .
cp -r docs/doxygen/html doxygen/
</pre></div>
</div>
<p>Since the <tt class="file docutils literal"><span class="pre">.gitignore</span></tt> file does not allow image and HTML files to be tracked, you will need to force all image and HTML files to be added to tracking history. The <tt class="file docutils literal"><span class="pre">configure.sh</span></tt> script contains the commands to add all the necessary files. The <tt class="file docutils literal"><span class="pre">configure.sh</span></tt> can be executed and the changes committed and pushed to GitHub:</p>
<div class="highlight-none"><div class="highlight"><pre>./configure.sh
git commit -am &#39;my commit message here&#39;
git push origin gh-pages-update
</pre></div>
</div>
<p>The final step in updating the website documentation is to <a class="reference external" href="https://help.github.com/articles/using-pull-requests">pull request</a> to the <tt class="docutils literal"><span class="pre">gh-pages</span></tt> branch of the OpenMOC repository on GitHub as described in <a class="reference internal" href="work_flow.html#work-flow"><em>Development Workflow</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The diff for the pull request into <strong>gh-pages</strong> will likely be massive! The purpose of this pull request is not to conduct a code review, but rather to provide a transparent and publicly-available record of when the website documentation has been changed.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/openmoc-logo-sphinx-small.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7. Documentation</a><ul>
<li><a class="reference internal" href="#preliminary-configuration">7.1. Preliminary Configuration</a></li>
<li><a class="reference internal" href="#writing-new-documentation">7.2. Writing New Documentation</a></li>
<li><a class="reference internal" href="#version-control-for-new-documentation">7.3. Version Control for New Documentation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="style_guide.html"
                        title="previous chapter">6. Style Guide for OpenMOC</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="work_flow.html"
                        title="next chapter">8. Development Workflow</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/devguide/documentation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="work_flow.html" title="8. Development Workflow"
             >next</a> |</li>
        <li class="right" >
          <a href="style_guide.html" title="6. Style Guide for OpenMOC"
             >previous</a> |</li>
        <li><a href="../index.html">OpenMOC Documentation</a> &raquo;</li>
          <li><a href="index.html" >Developer&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2012-2014, Massachusetts Institute of Technology.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30411614-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>