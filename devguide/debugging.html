<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5. Debugging OpenMOC &mdash; OpenMOC Documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="OpenMOC Documentation" href="../index.html" />
    <link rel="up" title="Developer’s Guide" href="index.html" />
    <link rel="next" title="6. Style Guide for OpenMOC" href="style_guide.html" />
    <link rel="prev" title="3. Python Build System" href="build_system.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="style_guide.html" title="6. Style Guide for OpenMOC"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="build_system.html" title="3. Python Build System"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">OpenMOC Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Developer&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="debugging-openmoc">
<span id="debugging"></span><h1>5. Debugging OpenMOC<a class="headerlink" href="#debugging-openmoc" title="Permalink to this headline">¶</a></h1>
<p>This section describes some recommended debugging techniques for developers working with OpenMOC source code. Although many novice code developers are accustomed to use <strong>printf debugging</strong> with the <code class="docutils literal"><span class="pre">printf(...)</span></code> C/C++ routing. The printf debugging methodology is <strong>highly discouraged</strong> since it leads to a very long debug iteration cycle between source code revision, compilation, and testing. Instead, developers are advised to use some form of a debug environment for C/C++ and/or Python.</p>
<p>In particular, this section describes <strong>GNU debugger</strong> <code class="docutils literal"><span class="pre">gdb</span></code> in detail with some basic examples of how to use it with the shared library C++ extension module that is built for OpenMOC. In addition, some debugging techniques for the Python source are overviewed.</p>
<div class="section" id="the-gnu-debugger-gdb">
<h2>5.1. The GNU Debugger (GDB)<a class="headerlink" href="#the-gnu-debugger-gdb" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://www.gnu.org/software/gdb/">GNU Project Debugger</a> (GDB) provides the free open source <code class="docutils literal"><span class="pre">gdb</span></code> program for debugging of programs written in C/C++ (and other languages). The GNU debugger is typically installed when the GNU compiler collection (<em>e.g.</em>, <code class="docutils literal"><span class="pre">gcc</span></code>, <code class="docutils literal"><span class="pre">g++</span></code>) is installed. However, if for some reason you do not have <code class="docutils literal"><span class="pre">gdb</span></code>, you may install it in Ubuntu using the <code class="docutils literal"><span class="pre">apt-get</span></code> package manager as follows:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>sudo apt-get install gdb
</pre></div>
</div>
<p>Likewise, the GNU debugger can be installed using MacPorts on machines running Mac OS X as follows:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>sudo port install gdb
</pre></div>
</div>
<p>There are a number of different ways to use to use and interact with GDB. There are a variety of graphical user interfaces for GDB, including <a class="reference external" href="http://www.gnu.org/software/ddd/">DDD</a> and <a class="reference external" href="http://www.eclipse.org/cdt/">Eclipse CDT</a> which may be helpful for advanced code developers. This section, however, will focus on using the command line interface to GDB via the console.</p>
</div>
<div class="section" id="debugging-c-c-source-code">
<h2>5.2. Debugging C/C++ Source Code<a class="headerlink" href="#debugging-c-c-source-code" title="Permalink to this headline">¶</a></h2>
<p>The majority of the compute-intensive code in OpenMOC is written in C/C++ as a compiled back-end shared library. This section overviews some of the key steps to using GDB to debug OpenMOC&#8217;s C/C++ source code. By no means does this section cover all of GDB&#8217;s capabilities. Advanced developers should consult one of the many outlets for GDB documentation available online, including the following</p>
<ul class="simple">
<li><a class="reference external" href="http://www.gnu.org/software/gdb/documentation/">Official GDB Documentation</a></li>
<li><a class="reference external" href="http://www.yolinux.com/TUTORIALS/GDB-Commands.html">GNU GDB Debugger Command Cheat Sheet</a></li>
<li><a class="reference external" href="http://www.nostarch.com/debugging.htm">The Art of Debugging</a></li>
<li><a class="reference external" href="http://www.amazon.com/Debugging-GDB-The-Source-Level-Debugger/dp/1882114884">Debugging with GDB</a></li>
</ul>
<div class="section" id="installing-openmoc-with-debug-symbols">
<h3>5.2.1. Installing OpenMOC with Debug Symbols<a class="headerlink" href="#installing-openmoc-with-debug-symbols" title="Permalink to this headline">¶</a></h3>
<p>In order to debug OpenMOC C/C++ source code, you must build and install the C/C++ extension module for Python with <a class="reference external" href="http://en.wikipedia.org/wiki/Debug_symbol">debug symbols</a>. This is easily done by appending the <a class="reference internal" href="../usersguide/running.html#cmdoption-g"><code class="xref std std-option docutils literal"><span class="pre">-g</span></code></a> command line option for the <code class="docutils literal"><span class="pre">gcc</span></code> compiler. The build system for OpenMOC can automatically append this flag for the compilation process with the <a class="reference internal" href="../usersguide/install.html#cmdoption--debug-mode"><code class="xref std std-option docutils literal"><span class="pre">--debug-mode</span></code></a> option:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>python setup.py install --user --debug-mode
</pre></div>
</div>
</div>
<div class="section" id="starting-gdb">
<h3>5.2.2. Starting GDB<a class="headerlink" href="#starting-gdb" title="Permalink to this headline">¶</a></h3>
<p>The GNU Debugger may be started from the console with the <code class="docutils literal"><span class="pre">gdb</span></code> command:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ gdb
GNU gdb (GDB) 7.5-ubuntu
Copyright (C) 2012 Free Software Foundation, Inc.
            License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;x86_64-linux-gnu&quot;.
For bug reporting instructions, please see:
&lt;http://www.gnu.org/software/gdb/bugs/&gt;.
(gdb)
</pre></div>
</div>
<p>If you are debugging code written for the GPU, the CUDA GNU Debugger should be used:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ cuda-gdb
NVIDIA (R) CUDA Debugger
5.5 release
Portions Copyright (C) 2007-2013 NVIDIA Corporation
GNU gdb (GDB) 7.2
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;x86_64-unknown-linux-gnu&quot;.
For bug reporting instructions, please see:
&lt;http://www.gnu.org/software/gdb/bugs/&gt;.
(cuda-gdb)
</pre></div>
</div>
<p>The CUDA GDB debugger oftentimes does not fail at the exact location of the error, so it is recommended to turn cuda memcheck on:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(cuda-gdb) set cuda memcheck on
</pre></div>
</div>
<p>These commands will leave you in an interactive session with GDB, complete with its own command line interface. From now on we will give all examples with gdb, but the same commands apply for cuda-gdb.</p>
</div>
<div class="section" id="initializing-python">
<h3>5.2.3. Initializing Python<a class="headerlink" href="#initializing-python" title="Permalink to this headline">¶</a></h3>
<p>From within the interactive GDB session, you must inform GDB that you plan to use Python as your binary executable:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) file python
Reading symbols from /usr/bin/python...Reading symbols from /usr/lib/debug/usr/bin/python2.7...done.
</pre></div>
</div>
</div>
<div class="section" id="running-python-in-gdb">
<h3>5.2.4. Running Python in GDB<a class="headerlink" href="#running-python-in-gdb" title="Permalink to this headline">¶</a></h3>
<p>Next you can select a Python file to execute using the <code class="docutils literal"><span class="pre">run</span></code> command with the Python script as the argument. For example, to run the <code class="file docutils literal"><span class="pre">/OpenMOC/sample-input/simple-lattice/simple-lattice.py</span></code> from within GDB, simply execute the following:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) run simple-lattice.py -i 5
Starting program: /usr/bin/python simple-lattice.py -i 5
[Thread debugging using libthread_db enabled]
Using host libthread_db library &quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;.
[  NORMAL ]  Importing materials data from HDF5...
[  NORMAL ]  Creating surfaces...
[  NORMAL ]  Creating cells...
[  NORMAL ]  Creating simple 4 x 4 lattice...
[  NORMAL ]  Creating geometry...
[  NORMAL ]  Number of flat source regions: 60
[  NORMAL ]  Initializing the track generator...
[  NORMAL ]  Returning from readTracksFromFile
[  NORMAL ]  Computing azimuthal angles and track spacings...
[  NORMAL ]  Generating track start and end points...
[  NORMAL ]  Segmenting tracks...
[  NORMAL ]  Initializing track boundary conditions...
[  NORMAL ]  Converging the source...
[  NORMAL ]  Iteration 0:   k_eff = 1.000000        res = 0.000E+00
[  NORMAL ]  Iteration 1:   k_eff = 1.270088        res = 2.594E+02
[  NORMAL ]  Iteration 2:   k_eff = 1.290540        res = 4.797E-01
[  NORMAL ]  Iteration 3:   k_eff = 1.309195        res = 1.919E-01
[  NORMAL ]  Iteration 4:   k_eff = 1.318423        res = 1.680E-01
[ WARNING ]  Unable to converge the source after 5 iterations
[  TITLE  ]  *******************************************************************
[  TITLE  ]                             TIMING REPORT
[  TITLE  ]  *******************************************************************
[  RESULT ]  Total time to solution...............................3.9251E-03 sec
[  RESULT ]  Solution time per unknown............................9.3454E-06 sec
[  RESULT ]  Solution time per iteration..........................7.8502E-04 sec
[  RESULT ]  Integration time per segment integration.............2.0098E-08 sec
[SEPARATOR]  -------------------------------------------------------------------
[  RESULT ]             # tracks          # segments          # FSRs
[SEPARATOR]  -------------------------------------------------------------------
[  RESULT ]                 116               930               60
[SEPARATOR]  -------------------------------------------------------------------
[  NORMAL ]  Plotting data...
[  TITLE  ]  *******************************************************************
[  TITLE  ]                               Finished
[  TITLE  ]  *******************************************************************
[Inferior 1 (process 25820) exited normally]
(gdb)
</pre></div>
</div>
<p>To obtain more information about program execution, GDB can be run in verbose mode using the <code class="xref std std-option docutils literal"><span class="pre">-v</span></code> optional argument to the <code class="docutils literal"><span class="pre">run</span></code> command:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) run -v simple-lattice.py
...
[Inferior 1 (process 25820) exited normally]
(gdb)
</pre></div>
</div>
</div>
<div class="section" id="set-breakpoints">
<h3>5.2.5. Set Breakpoints<a class="headerlink" href="#set-breakpoints" title="Permalink to this headline">¶</a></h3>
<p>A <strong>breakpoint</strong> is an intentional stopping or pausing place in a program for debugging purposes. A breakpoint can be set using <code class="docutils literal"><span class="pre">gdb</span></code> using the <code class="docutils literal"><span class="pre">breakpoint</span></code> or <code class="docutils literal"><span class="pre">br</span></code> commands. The <code class="docutils literal"><span class="pre">br</span></code> command can be set at a specific line number in a specific source file. For example, if we wanted to run an OpenMOC program until the <code class="docutils literal"><span class="pre">Material::setNumEnergyGroups(...)</span></code> routine was called, we could set a breakpoint to the first line in that routine and then execute <code class="file docutils literal"><span class="pre">simple-lattice.py</span></code> as follows:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) br Material.cpp:349
No source file named Material.cpp.
Make breakpoint pending on future shared library load? (y or [n]) y

Breakpoint 1 (Material.cpp:349) pending.
(gdb) run simple-lattice.py
Starting program: /usr/bin/python simple-lattice.py
[Thread debugging using libthread_db enabled]
Using host libthread_db library &quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;.
[  NORMAL ]  Importing materials data from HDF5...

Breakpoint 1, Material::setNumEnergyGroups (this=0x1b6ef80, num_groups=7)
            at src/Material.cpp:349
349     if (num_groups &lt; 0)
(gdb)
</pre></div>
</div>
<p>As shown in the snippet above, the code executes until the breakpoint is reached and short summary of the source code is printed to the console. Alternatively, we could have set the breakpoint using the name of the routine instead:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) br Material::setNumEnergyGroups
Function &quot;Material::setNumEnergyGroups&quot; not defined.
Make breakpoint pending on future shared library load? (y or [n]) y

Breakpoint 1 (Material::setNumEnergyGroups) pending.
(gdb) run simple-lattice.py
Starting program: /usr/bin/python simple-lattice.py
[Thread debugging using libthread_db enabled]
Using host libthread_db library &quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;.
[  NORMAL ]  Importing materials data from HDF5...

Breakpoint 1, Material::setNumEnergyGroups (this=0x1b6ef80, num_groups=7)
            at src/Material.cpp:347
347 void Material::setNumEnergyGroups(const int num_groups) {
(gdb)
</pre></div>
</div>
<p>In each case, a breakpoint is set and the program is executed until that line is reached. The entire program state is stored and the execution is simply interrupted until further notice to GDB is given by the user.</p>
</div>
<div class="section" id="set-watchpoints">
<h3>5.2.6. Set Watchpoints<a class="headerlink" href="#set-watchpoints" title="Permalink to this headline">¶</a></h3>
<p>A <strong>watchpoint</strong> is a <em>conditional breakpoint</em>, or a breakpoint that is only reached when a certain condition is met. The condition may be the reading, writing, or modification of a specific location in memory. For example, if we wanted to watch the value of the <code class="docutils literal"><span class="pre">Material::_num_groups</span></code> private class attribute we could place a watchpoint on it. First, we might start gdb and place a breakpoint on the <code class="docutils literal"><span class="pre">Material::setNumEnergyGroups(...)</span></code> routine as shown in the preceding section. Then we could place a watchpoint as follows:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) watch _num_groups
Watchpoint 2: _num_groups
(gdb) continue
Continuing.
Watchpoint 2: _num_groups

Old value = 0
New value = 7
Material::setNumEnergyGroups (this=0x1b6ef80, num_groups=7)
            at src/Material.cpp:358
358     if (_data_aligned) {
(gdb)
</pre></div>
</div>
<p>As illustrated, GDB stepped through the program until <code class="docutils literal"><span class="pre">_num_groups</span></code> was modified or used and reported its value to the console. Note that this snippet made use of the <code class="docutils literal"><span class="pre">continue</span></code> command which is covered in th next section. At this point, it suffices to say that <code class="docutils literal"><span class="pre">continue</span></code> resumes program execution from a breakpoint until it a new breakpoint or watchpoint is reached.</p>
<p>GDB provides a variety of method to <a class="reference external" href="https://sourceware.org/gdb/onlinedocs/gdb/Set-Watchpoints.html">set watchpoints</a> during a program&#8217;s execution. For example, instead of placing a watchpoint on <code class="docutils literal"><span class="pre">_num_groups</span></code>, we could instead have placed a watchpoint on the condition that <code class="docutils literal"><span class="pre">_num_groups</span></code> &gt; 0 as follows:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) watch _num_groups &gt; 0
Watchpoint 2: _num_groups &gt; 0
(gdb) continue
Continuing.
Watchpoint 2: _num_groups &gt; 0

Old value = false
New value = true
Material::setNumEnergyGroups (this=0x1b6ef80, num_groups=7)
            at src/Material.cpp:358
358     if (_data_aligned) {
(gdb)
</pre></div>
</div>
<p>In this case, the result of the conditional is reported to the screen.</p>
</div>
<div class="section" id="step-through-the-program">
<h3>5.2.7. Step through the Program<a class="headerlink" href="#step-through-the-program" title="Permalink to this headline">¶</a></h3>
<p>This section highlights a few of the key commands which may be used to control program execution using GDB.</p>
<ul>
<li><p class="first"><strong>Continue</strong></p>
<p>The <code class="docutils literal"><span class="pre">continue</span></code> or <code class="docutils literal"><span class="pre">c</span></code> command is used to instruct GDB to continue program execution until the next breakpoint or watchpoint is reached (<em>i.e.</em>, useful for loops). An optional integer argument <code class="xref std std-option docutils literal"><span class="pre">&lt;number&gt;</span></code> may be given to <code class="docutils literal"><span class="pre">continue</span></code> to instruct GDB to ignore the current breakpoint some number of times.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) continue &lt;number&gt;
</pre></div>
</div>
</li>
<li><p class="first"><strong>Step</strong></p>
<p>The <code class="docutils literal"><span class="pre">step</span></code> or <code class="docutils literal"><span class="pre">s</span></code> command will step to the next line of code. If the next line of code is a function call, the <code class="docutils literal"><span class="pre">step</span></code> command <strong>will</strong> step into the function. An optional integer argument <code class="xref std std-option docutils literal"><span class="pre">&lt;number&gt;</span></code> may be given to <code class="docutils literal"><span class="pre">step</span></code> to instruct GDB to step through some number of lines.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) step &lt;number&gt;
</pre></div>
</div>
</li>
<li><p class="first"><strong>Next</strong></p>
<p>The <code class="docutils literal"><span class="pre">next</span></code> or <code class="docutils literal"><span class="pre">n</span></code> command will step to the next line of code.  If the next line of code is a function call, the <code class="docutils literal"><span class="pre">step</span></code> command <strong>will not</strong> step into the function. An optional integer argument <code class="xref std std-option docutils literal"><span class="pre">&lt;number&gt;</span></code> may be given to <code class="docutils literal"><span class="pre">next</span></code> to instruct GDB to step through some number of lines (without entering functions).</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) next &lt;number&gt;
</pre></div>
</div>
</li>
<li><p class="first"><strong>Until</strong></p>
<p>The <code class="docutils literal"><span class="pre">until</span></code> command will continue processing until reaching a specifed line number <code class="xref std std-option docutils literal"><span class="pre">&lt;number&gt;</span></code>. This is akin to setting a breakpoint which is only used once and which is immediately deleted following its first use.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) until &lt;number&gt;
</pre></div>
</div>
</li>
<li><p class="first"><strong>Where</strong></p>
<p>The <code class="docutils literal"><span class="pre">where</span></code> command will show which line number you are at and which function you are in.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) where
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="examine-variables">
<h3>5.2.8. Examine Variables<a class="headerlink" href="#examine-variables" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">print</span></code> or <code class="docutils literal"><span class="pre">p</span></code> command may be used to examine variables within some scope of the code with GDB. For example, if you were interested in the value of <code class="xref std std-option docutils literal"><span class="pre">variable</span></code>, you might set a breakpoint at the entrance point to the code region of interest, and step through the region while printing the value as follows:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) print variable
</pre></div>
</div>
</div>
<div class="section" id="report-the-debugger-state">
<h3>5.2.9. Report the Debugger State<a class="headerlink" href="#report-the-debugger-state" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">info</span></code> or <code class="docutils literal"><span class="pre">i</span></code> command may be used to report debugger state information to the console. For example, to list all breakpoints - including the file and line numbers where each is set - the <code class="docutils literal"><span class="pre">info</span></code> command is used with the <code class="xref std std-option docutils literal"><span class="pre">breakpoints</span></code> option:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) info breakpoints
</pre></div>
</div>
<p>To list breakpoint numbers only, <code class="docutils literal"><span class="pre">info</span></code> command is used with the <code class="xref std std-option docutils literal"><span class="pre">break</span></code> option:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) info break
</pre></div>
</div>
<p>Likewise, to list all watchpints, the <code class="docutils literal"><span class="pre">info</span></code> command is used with the <code class="xref std std-option docutils literal"><span class="pre">watchpoints</span></code> option:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) info watchpoints
</pre></div>
</div>
</div>
<div class="section" id="disable-breakpoints">
<h3>5.2.10. Disable Breakpoints<a class="headerlink" href="#disable-breakpoints" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">disable</span></code> command is used to disable breakpoints with GDB. When a breakpoint is disabled, it is still retained by GDB but is not used during program execution. The <code class="docutils literal"><span class="pre">enable</span></code> command may be used to continue using the breakpoint again at a later time. The following illustrates how to cancel breakpoints 1, 3, 4, 5, and 6, and re-enable breakpoints 4 and 5:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) disable 1 3-6
(gdb) enable 4-5
</pre></div>
</div>
</div>
<div class="section" id="printing-the-stack">
<h3>5.2.11. Printing the Stack<a class="headerlink" href="#printing-the-stack" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">backtrace</span></code> or <code class="docutils literal"><span class="pre">bt</span></code> command may be used to show the trace of the function the program is currently in:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) bt
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">backtrace</span></code> command can be particularly useful when debugging <a class="reference external" href="http://en.wikipedia.org/wiki/Segmentation_fault">segmentation faults</a>. In particular, GDB may be used to run the program until the segmentation fault is reached. At this point, the use of <code class="docutils literal"><span class="pre">backtrace</span></code> will print the function call stack, showing where the segmentation faul occurred.</p>
</div>
<div class="section" id="stop-program-execution">
<h3>5.2.12. Stop Program Execution<a class="headerlink" href="#stop-program-execution" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">kill</span></code> command may be used to stop a program&#8217;s execution while keeping the GDB process running:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) kill
</pre></div>
</div>
</div>
<div class="section" id="exiting-gdb">
<h3>5.2.13. Exiting GDB<a class="headerlink" href="#exiting-gdb" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">quit</span></code> or <code class="docutils literal"><span class="pre">q</span></code> command may be used to exit the <code class="docutils literal"><span class="pre">gdb</span></code> debugger and return to the console:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>(gdb) quit()
</pre></div>
</div>
</div>
</div>
<div class="section" id="debugging-python-source-code">
<h2>5.3. Debugging Python Source Code<a class="headerlink" href="#debugging-python-source-code" title="Permalink to this headline">¶</a></h2>
<p>There are a a number of resources which one may use to debug Python code. Many popular <a class="reference external" href="http://en.wikipedia.org/wiki/Integrated_development_environment">Integrated Development Environments</a> (IDEs) for Python include interactive visual debugging support, including <a class="reference external" href="http://www.jetbrains.com/pycharm/">PyCharm</a>, <a class="reference external" href="http://pydev.org/">Eclipse PyDev</a>, and <a class="reference external" href="https://wiki.python.org/moin/Wing%20IDE">Wing IDE</a>. It is <strong>highly recommended</strong> that code developers use one of these IDEs for Python development and debugging. The <a class="reference external" href="http://www.jetbrains.com/pycharm/">PyCharm</a> IDE is especially recommended for OpenMOC users developing input and data processing modules in Python. Although PyCharm is a commercial product, a community version is provided for free with many of the most essential features including the following:</p>
<ul class="simple">
<li>Syntax highlighting</li>
<li>Auto-indentation</li>
<li>Code formatting</li>
<li>Code completion</li>
<li>Line/block commenting</li>
<li>Refactoring</li>
<li>Python interpreter</li>
<li>Integrated debugger</li>
</ul>
<p>In addition, advanced developers should consult one of the many online outlets for documentation on debugging Python programs, including the following:</p>
<ul class="simple">
<li><a class="reference external" href="http://pythonconquerstheuniverse.wordpress.com/2009/09/10/debugging-in-python/">Debugging in Python</a></li>
<li><a class="reference external" href="http://www.onlamp.com/pub/a/python/2005/09/01/debugger.html">Interactive Debugging in Python</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/openmoc-logo-sphinx-small.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5. Debugging OpenMOC</a><ul>
<li><a class="reference internal" href="#the-gnu-debugger-gdb">5.1. The GNU Debugger (GDB)</a></li>
<li><a class="reference internal" href="#debugging-c-c-source-code">5.2. Debugging C/C++ Source Code</a><ul>
<li><a class="reference internal" href="#installing-openmoc-with-debug-symbols">5.2.1. Installing OpenMOC with Debug Symbols</a></li>
<li><a class="reference internal" href="#starting-gdb">5.2.2. Starting GDB</a></li>
<li><a class="reference internal" href="#initializing-python">5.2.3. Initializing Python</a></li>
<li><a class="reference internal" href="#running-python-in-gdb">5.2.4. Running Python in GDB</a></li>
<li><a class="reference internal" href="#set-breakpoints">5.2.5. Set Breakpoints</a></li>
<li><a class="reference internal" href="#set-watchpoints">5.2.6. Set Watchpoints</a></li>
<li><a class="reference internal" href="#step-through-the-program">5.2.7. Step through the Program</a></li>
<li><a class="reference internal" href="#examine-variables">5.2.8. Examine Variables</a></li>
<li><a class="reference internal" href="#report-the-debugger-state">5.2.9. Report the Debugger State</a></li>
<li><a class="reference internal" href="#disable-breakpoints">5.2.10. Disable Breakpoints</a></li>
<li><a class="reference internal" href="#printing-the-stack">5.2.11. Printing the Stack</a></li>
<li><a class="reference internal" href="#stop-program-execution">5.2.12. Stop Program Execution</a></li>
<li><a class="reference internal" href="#exiting-gdb">5.2.13. Exiting GDB</a></li>
</ul>
</li>
<li><a class="reference internal" href="#debugging-python-source-code">5.3. Debugging Python Source Code</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="build_system.html"
                        title="previous chapter">3. Python Build System</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="style_guide.html"
                        title="next chapter">6. Style Guide for OpenMOC</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/devguide/debugging.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="style_guide.html" title="6. Style Guide for OpenMOC"
             >next</a> |</li>
        <li class="right" >
          <a href="build_system.html" title="3. Python Build System"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">OpenMOC Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Developer&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2012-2014, Massachusetts Institute of Technology.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30411614-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>