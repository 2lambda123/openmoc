<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.1.2">
  <compounddef id="materialize_8py" kind="file">
    <compoundname>materialize.py</compoundname>
    <innernamespace refid="namespaceopenmoc_1_1materialize">openmoc::materialize</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespaceopenmoc_1_1materialize" refkind="compound"><highlight class="comment">##</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">#<sp/>@file<sp/>materialize.py</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">#<sp/>@package<sp/>openmoc.materialize</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="comment">#<sp/>@brief<sp/>The<sp/>materialize<sp/>module<sp/>provides<sp/>utility<sp/>functions<sp/>to<sp/>read<sp/>and<sp/>write</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>multi-group<sp/>materials<sp/>cross-section<sp/>data<sp/>from<sp/>HDF5<sp/>binary<sp/>file<sp/>format.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="comment">#<sp/>@author<sp/>William<sp/>Boyd<sp/>(wboyd@mit.edu)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="comment">#<sp/>@date<sp/>April<sp/>23,<sp/>2013</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>h5py</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>numpy<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>np</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>openmoc<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>*</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>log<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>*</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="comment">##</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="comment">#<sp/>@brief</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="comment">#<sp/>@param<sp/>filename</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="comment">#<sp/>@return<sp/>a<sp/>list<sp/>of<sp/>materials<sp/>for<sp/>OpenMOC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespaceopenmoc_1_1materialize_1a202690e95b90bfa40f5968edf8e37730" kindref="member">materialize</ref>(filename):</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>that<sp/>the<sp/>filename<sp/>is<sp/>a<sp/>string</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>isinstance(filename,<sp/>str):</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespaceopenmoc_1_1log_1a0bfafaa584b4e7156cce255cb70943e5" kindref="member" tooltip="Function to print a log message to the screen.">py_printf</ref>(</highlight><highlight class="stringliteral">&apos;ERROR&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Unable<sp/>to<sp/>materialize<sp/>using<sp/>filename<sp/>%s<sp/>&apos;</highlight><highlight class="normal"><sp/>+<sp/>\</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;since<sp/>it<sp/>is<sp/>not<sp/>a<sp/>string&apos;</highlight><highlight class="normal">,<sp/>str(filename))</highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Create<sp/>a<sp/>h5py<sp/>file<sp/>handle<sp/>for<sp/>the<sp/>file</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/>f<sp/>=<sp/>h5py.File(filename)</highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>that<sp/>the<sp/>file<sp/>has<sp/>an<sp/>&apos;energy<sp/>groups&apos;<sp/>attribute</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;Energy<sp/>Groups&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>f.attrs:</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespaceopenmoc_1_1log_1a0bfafaa584b4e7156cce255cb70943e5" kindref="member" tooltip="Function to print a log message to the screen.">py_printf</ref>(</highlight><highlight class="stringliteral">&apos;ERROR&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Unable<sp/>to<sp/>materialize<sp/>file<sp/>%s<sp/>since<sp/>it<sp/>does<sp/>&apos;</highlight><highlight class="normal"><sp/>+<sp/>\</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;not<sp/>contain<sp/>an<sp/>\&apos;Energy<sp/>Groups\&apos;<sp/>attribute&apos;</highlight><highlight class="normal">,<sp/>filename)</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/>num_groups<sp/>=<sp/>f.attrs[</highlight><highlight class="stringliteral">&apos;Energy<sp/>Groups&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>that<sp/>the<sp/>number<sp/>of<sp/>energy<sp/>groups<sp/>is<sp/>an<sp/>integer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>isinstance(num_groups,<sp/>int):</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespaceopenmoc_1_1log_1a0bfafaa584b4e7156cce255cb70943e5" kindref="member" tooltip="Function to print a log message to the screen.">py_printf</ref>(</highlight><highlight class="stringliteral">&apos;ERROR&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Unable<sp/>to<sp/>materialize<sp/>file<sp/>%s<sp/>since<sp/>the<sp/>&apos;</highlight><highlight class="normal"><sp/>+<sp/>\</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;number<sp/>of<sp/>energy<sp/>groups<sp/>%s<sp/>is<sp/>not<sp/>an<sp/>integer&apos;</highlight><highlight class="normal">,<sp/>\</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str(num_groups))</highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/>xs_types<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;Total<sp/>XS&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Absorption<sp/>XS&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Scattering<sp/>XS&apos;</highlight><highlight class="normal">,<sp/>\</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Fission<sp/>XS&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Nu<sp/>Fission<sp/>XS&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Chi&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/>material_names<sp/>=<sp/>list(f)</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/>materials<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Loop<sp/>over<sp/>each<sp/>material<sp/>and<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>material_names:</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespaceopenmoc_1_1log_1a0bfafaa584b4e7156cce255cb70943e5" kindref="member" tooltip="Function to print a log message to the screen.">py_printf</ref>(</highlight><highlight class="stringliteral">&apos;INFO&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Importing<sp/>material<sp/>%s&apos;</highlight><highlight class="normal">,<sp/>str(name))</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_material<sp/>=<sp/><ref refid="classMaterial" kindref="compound" tooltip="The material class represents a unique material and its relevant nuclear data (ie, multigroup cross-sections) for neutron transport.">Material</ref>(material_id())</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_material.setNumEnergyGroups(int(num_groups))</highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Retrieve<sp/>xs<sp/>data<sp/>from<sp/>file<sp/>for<sp/>this<sp/>material</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sigma_t<sp/>=<sp/>f[name][</highlight><highlight class="stringliteral">&apos;Total<sp/>XS&apos;</highlight><highlight class="normal">][...]</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sigma_a<sp/>=<sp/>f[name][</highlight><highlight class="stringliteral">&apos;Absorption<sp/>XS&apos;</highlight><highlight class="normal">][...]</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sigma_s<sp/>=<sp/>f[name][</highlight><highlight class="stringliteral">&apos;Scattering<sp/>XS&apos;</highlight><highlight class="normal">][...]</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sigma_f<sp/>=<sp/>f[name][</highlight><highlight class="stringliteral">&apos;Fission<sp/>XS&apos;</highlight><highlight class="normal">][...]</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nu_sigma_f<sp/>=<sp/>f[name][</highlight><highlight class="stringliteral">&apos;Nu<sp/>Fission<sp/>XS&apos;</highlight><highlight class="normal">][...]</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>chi<sp/>=<sp/>f[name][</highlight><highlight class="stringliteral">&apos;Chi&apos;</highlight><highlight class="normal">][...]</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Load<sp/>the<sp/>cross-section<sp/>data<sp/>into<sp/>the<sp/>material<sp/>object</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_material.setSigmaT(sigma_t)</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_material.setSigmaA(sigma_a)</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_material.setSigmaS(sigma_s)</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_material.setSigmaF(sigma_f)</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_material.setNuSigmaF(nu_sigma_f)</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_material.setChi(chi)</highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Add<sp/>this<sp/>material<sp/>to<sp/>the<sp/>list</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>materials[name]<sp/>=<sp/>new_material</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Return<sp/>the<sp/>list<sp/>of<sp/>materials</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>materials</highlight></codeline>
    </programlisting>
    <location file="/home/wbinventor/NSE-CRPG-Codes/OpenMOC/openmoc/materialize.py"/>
  </compounddef>
</doxygen>
